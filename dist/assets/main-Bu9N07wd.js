const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/model-CTiQBbrG.js","assets/likec4-C1QItc1V.js","assets/vendors-DZ62sxLm.js","assets/icons-BJ_WCqh0.js","assets/puml-COFUjlnb.js","assets/e-CfcqPV8P.js","assets/i-DL9VhETC.js","assets/o-BkXc4xk3.js","assets/mmd-DsZpm1cH.js","assets/dot-Cufivdcu.js","assets/d2-0IW1PLws.js"])))=>i.map(i=>d[i]);
import{j as e,r as g,c as Ht}from"./vendors-DZ62sxLm.js";import{r as T,c as Wt,s as Ut,e as we,O as Y,u as re,a as f,b as Pe,C as _,S as z,T as I,B as v,L as R,E as Je,N as be,d as Gt,f as qt,g as Kt,h as Fe,i as w,G as $,j as Qe,n as J,k as O,o as Yt,l as Jt,m as Qt,p as Xt,q as Zt,P as eo,D as to,t as oo,v as Se,w as no,M as Xe,x as Ze,y as et,z as ro,A as V,F as tt,H as q,I as k,J as Ve,K as se,Q as D,R as L,U as ie,V as ae,W as so,X as io,Y as ao,Z as lo,_ as le,$ as Te,a0 as ot,a1 as nt,a2 as co,a3 as rt,a4 as de,a5 as uo,a6 as ho,a7 as po,a8 as mo,a9 as go,aa as xo,ab as Be,ac as Oe,ad as jo,ae as B,af as wo,ag as Le,ah as fo,ai as vo,aj as bo,ak as oe,al as yo,am as Io,an as Ro,ao as U,ap as $o,aq as G,ar as He,as as ko,at as Co,au as Po,av as We,aw as st,ax as So,ay as Vo,az as To,aA as Lo,aB as Eo,aC as _o,aD as Do,aE as zo,aF as No,aG as Mo,aH as Ue,aI as it,aJ as Ao,aK as Fo}from"./e-CfcqPV8P.js";import{c as b,u as Q,S as Ee,M as Bo,B as _e,I as Oo,a as at,b as ce,L as Ho,d as Wo,e as Uo,f as Go,g as qo,h as Ko,i as lt,p as dt,j as De,k as ct,l as ut,m as Yo,n as Jo,o as Qo,q as ht,r as pt,s as Xo,t as Zo,v as en,w as tn}from"./i-DL9VhETC.js";import{C as ne,p as ze,k as on,a as nn,b as rn}from"./o-BkXc4xk3.js";import{R as sn,c as Ge,t as qe,s as ye,e as an,i as fe,D as Ie,n as ln,a as dn,b as cn,d as un,f as hn}from"./likec4-C1QItc1V.js";const pn="modulepreload",mn=function(t){return"/"+t},Ke={},N=function(o,n,r){let i=Promise.resolve();if(n&&n.length>0){let u=function(p){return Promise.all(p.map(c=>Promise.resolve(c).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),d=a?.nonce||a?.getAttribute("nonce");i=u(n.map(p=>{if(p=mn(p),p in Ke)return;Ke[p]=!0;const c=p.endsWith(".css"),m=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${m}`))return;const j=document.createElement("link");if(j.rel=c?"stylesheet":pn,c||(j.as="script"),j.crossOrigin="",j.href=p,d&&j.setAttribute("nonce",d),document.head.appendChild(j),c)return new Promise((C,P)=>{j.addEventListener("load",C),j.addEventListener("error",()=>P(new Error(`Unable to preload CSS for ${p}`)))})}))}function s(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return i.then(a=>{for(const d of a||[])d.status==="rejected"&&s(d.reason);return o().catch(s)})},Re=[{id:"default",title:"default"}];let gn={default:()=>N(()=>import("./model-CTiQBbrG.js"),__vite__mapDeps([0,1,2]))};async function mt(t){const o=gn[t];if(!o)throw new Error("Unknown projectId: "+t);return await o()}function Ne({error:t,resetErrorBoundary:o}){const n=O();return tt(t)?e.jsx(_,{my:"md",children:e.jsxs(q,{variant:"light",color:"orange",children:[e.jsxs(I,{c:"orange",fz:"md",children:["The diagram"," ",e.jsx(k,{color:"orange"})," ","does not exist or contains errors"]}),e.jsx(v,{onClick:()=>{o(),n.navigate({to:"/"})},variant:"light",color:"orange",mt:"lg",size:"xs",children:"Go to overview"})]})}):e.jsx(_,{my:"md",children:e.jsxs(q,{variant:"filled",color:"red",title:"Something went wrong",children:[e.jsx(k,{block:!0,color:"red",children:t.stack??t.message}),e.jsxs($,{mt:"lg",children:[e.jsx(v,{onClick:o,color:"red",variant:"white",size:"xs",children:"Try again"}),e.jsx(v,{onClick:()=>n.navigate({to:"/"}),color:"red",size:"xs",children:"Go to overview"})]})]})})}const xn=b({paddingTop:"[120px]",position:"relative",zIndex:"1",sm:{paddingTop:"[220px]"}}),jn=b({position:"absolute",inset:"0",opacity:.2}),wn=b({position:"relative"}),fn=b({paddingTop:"[80px]",paddingBottom:"[80px]"}),vn=b({maxWidth:T(540),margin:"auto",marginTop:"xl",marginBottom:"[calc({spacing.xl}*1.5)]"}),bn=b({textAlign:"center",fontWeight:"900",fontSize:T(38)});function Me(){return e.jsx(_,{className:fn,children:e.jsxs("div",{className:wn,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 362 145",className:jn,children:e.jsx("path",{fill:"currentColor",d:"M62.6 142c-2.133 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2L58.2 4c.8-1.333 2.067-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .667.533 1 1.267 1 2.2v21.2c0 .933-.333 1.733-1 2.4-.667.533-1.467.8-2.4.8H93v20.8c0 2.133-1.067 3.2-3.2 3.2H62.6zM33 90.4h26.4V51.2L33 90.4zM181.67 144.6c-7.333 0-14.333-1.333-21-4-6.666-2.667-12.866-6.733-18.6-12.2-5.733-5.467-10.266-13-13.6-22.6-3.333-9.6-5-20.667-5-33.2 0-12.533 1.667-23.6 5-33.2 3.334-9.6 7.867-17.133 13.6-22.6 5.734-5.467 11.934-9.533 18.6-12.2 6.667-2.8 13.667-4.2 21-4.2 7.467 0 14.534 1.4 21.2 4.2 6.667 2.667 12.8 6.733 18.4 12.2 5.734 5.467 10.267 13 13.6 22.6 3.334 9.6 5 20.667 5 33.2 0 12.533-1.666 23.6-5 33.2-3.333 9.6-7.866 17.133-13.6 22.6-5.6 5.467-11.733 9.533-18.4 12.2-6.666 2.667-13.733 4-21.2 4zm0-31c9.067 0 15.6-3.733 19.6-11.2 4.134-7.6 6.2-17.533 6.2-29.8s-2.066-22.2-6.2-29.8c-4.133-7.6-10.666-11.4-19.6-11.4-8.933 0-15.466 3.8-19.6 11.4-4 7.6-6 17.533-6 29.8s2 22.2 6 29.8c4.134 7.467 10.667 11.2 19.6 11.2zM316.116 142c-2.134 0-3.2-1.067-3.2-3.2V118h-56c-2 0-3-1-3-3V92.8c0-1.333.4-2.733 1.2-4.2l56.6-84.6c.8-1.333 2.066-2 3.8-2h28c2 0 3 1 3 3v85.4h11.2c.933 0 1.733.333 2.4 1 .666.533 1 1.267 1 2.2v21.2c0 .933-.334 1.733-1 2.4-.667.533-1.467.8-2.4.8h-11.2v20.8c0 2.133-1.067 3.2-3.2 3.2h-27.2zm-29.6-51.6h26.4V51.2l-26.4 39.2z"})}),e.jsxs("div",{className:xn,children:[e.jsx(Qe,{className:bn,children:"Nothing to see here"}),e.jsx(I,{c:"dimmed",size:"lg",ta:"center",className:vn,children:"Page you are trying to open does not exist. You may have mistyped the address, or the page has been moved to another URL. If you think this is an error contact support."}),e.jsx($,{justify:"center",children:e.jsx(v,{component:R,to:"/",search:!0,size:"md",children:"Take me back to home page"})})]})]})})}function yn({children:t}){const o=le(),n=Te(r=>{o({to:"/project/$projectId/",params:{projectId:r}}).catch(console.error)});return e.jsx(Ho,{projects:Re,onProjectChange:n,children:t})}const In=t=>{if(typeof t!="string")return"auto";const o=t.toLowerCase();return o==="light"||o==="dark"?o:"auto"},Rn=t=>{switch(!0){case typeof t=="number":return Math.round(t);case typeof t=="string":return Math.round(parseFloat(t))}return 20},$n=t=>{if(typeof t!="string")return"diagram";const o=t.toLowerCase();return o==="diagram"||o==="sequence"?o:"diagram"},H=Wt()({component:kn,validateSearch:t=>({...we(t.padding)&&{padding:Rn(t.padding)},...we(t.theme)&&{theme:In(t.theme)},...we(t.dynamic)&&{dynamic:$n(t.dynamic)}}),search:{middlewares:[Ut({padding:20,theme:"auto",dynamic:"diagram"})]}});function kn(){return e.jsxs(yn,{children:[e.jsx(Y,{}),e.jsx(Cn,{})]})}const Cn=()=>{const{theme:t}=H.useSearch(),o=re();return g.useEffect(()=>{t&&o.setColorScheme(t)},[t]),null},Pn=f("/projects")({component:Sn});function Sn(){const t=Q();return Pe(`Projects - ${ze}`),e.jsx(_,{size:"xs",py:"lg",children:e.jsxs(z,{children:[e.jsx(I,{fz:"lg",children:"Select a project"}),t.map(o=>e.jsx(v,{variant:"default",size:"lg",fw:400,renderRoot:n=>e.jsx(R,{...n,to:"/project/$projectId/",params:{projectId:o.id}}),styles:{inner:{justifyContent:"flex-start"}},children:o.title??o.id},o.id))]})})}const Vn=g.lazy(async()=>{const{ProjectIcons:t}=await N(async()=>{const{ProjectIcons:o}=await import("./icons-BJ_WCqh0.js");return{ProjectIcons:o}},__vite__mapDeps([3,2]));return{default:t}}),Tn=t=>e.jsx(g.Suspense,{fallback:e.jsx(Do,{className:"pending",type:"oval",size:"xs"}),children:e.jsx(Vn,{...t})});let Ln={};function gt({children:t,projectId:o}){const n=Ln[o]??=r=>e.jsx(Tn,{...r,projectId:o});return e.jsx(Wo,{value:n,children:t})}const xt=g.createContext(null),En=xt.Provider,jt=()=>{const t=g.useContext(xt);if(t===null)throw new Error("LikeC4ModelAtom is not provided");return t};function wt({likec4data:t,likec4model:o,children:n}){const r=ot(o);return e.jsx(En,{value:o,children:e.jsx(Uo,{likec4model:r,children:n})})}b({position:"absolute",inset:"0",zIndex:1});const ue=b({minWidth:300,"& svg":{width:"100%",height:"auto"}}),_n={var:"--header-height"},he=b({padding:"0",margin:"0",width:"100%",height:"100%",[_n.var]:"60px","--likec4-options-panel-top":"60px","--likec4-options-panel-right":"10px"});b({boxSizing:"border-box",border:"0px solid transparent",padding:"0",margin:"0",marginRight:"auto",marginBottom:"auto",background:"transparent"});const ft=f("/_single")({staleTime:1/0,loader:async({context:t})=>{const o=t.projectId,{$likec4data:n,$likec4model:r}=await mt(o);return{$likec4data:n,$likec4model:r,projectId:o}},component:Dn});function Dn(){const{$likec4data:t,$likec4model:o,projectId:n}=ft.useLoaderData();return e.jsx("div",{className:he,children:e.jsx(Je,{FallbackComponent:Ne,children:e.jsx(gt,{projectId:n,children:e.jsx(wt,{likec4data:t,likec4model:o,children:e.jsx(Y,{})})})})})}const zn=f("/")({component:()=>Q().length>1?e.jsx(be,{to:"/projects/",replace:!0}):e.jsx(be,{to:"/single-index/",mask:{to:"/",unmaskOnReload:!0}})});function vt(t=!0){Vo(()=>{const o=document.body.parentElement;if(!o||t!==!0)return;const n="transparent-bg";return o.classList.add(n),()=>{o.classList.remove(n)}},[t])}function bt(){const t=jt(),[o,n]=g.useState([]);return g.useEffect(()=>t.subscribe(r=>{n(i=>{const s=[...r.views()].map(a=>{const d=a.$layouted,u=i.find(p=>p.id===a.id);return u&&nt(d,u)?u:d});return co(i,s)?i:s})}),[t]),o}function yt(){return Se({select:t=>t.viewId??"index",strict:!1})}function W(){const t=yt(),o=jt(),[n,r]=g.useState("manual");ce(()=>{r("manual")},[t]);const[i,s]=g.useState(o.value?.findView(t)?.$layouted??null);return g.useEffect(()=>o.subscribe(a=>{s(d=>{const u=a.findView(t),p=(n==="manual"?u?.$layouted:u?.$view)??null;return nt(d,p)?d:p})}),[o,t,n]),[i,r]}function Nn(){const t=Q(),o=Se({select:n=>n.projectId,strict:!1});return t.find(n=>n.id===o)??t[0]}b({color:"mantine.colors.dimmed"});b({});const Mn=b({position:"relative",overflow:"hidden",padding:"0",margin:"0",backgroundOrigin:"padding-box",backgroundImage:"radial-gradient({colors.mantine.colors.defaultBorder} 15%, {colors.mantine.colors.body} 15%)",backgroundPosition:"0 0",backgroundSize:"12px 12px",_after:{content:'" "',position:"absolute",top:"0",left:"0",right:"0",bottom:"0",zIndex:"1"}}),An=b({position:"absolute",inset:"0",zIndex:5}),Fn=f("/_single/single-index")({component:Bn});function Bn(){Pe(ze);const t=bt();return e.jsx(_,{size:"xl",children:e.jsx(Gt,{p:{base:"md",sm:"xl"},cols:{base:1,sm:2,md:3,xl:4},spacing:{base:10,sm:"xl"},verticalSpacing:{base:"md",sm:"xl"},children:t.map(o=>e.jsx(On,{view:o},o.id))})})}function On({view:t}){const[o,n]=g.useState(!1),{ref:r,inViewport:i}=qt();return g.useEffect(()=>{if(!i||o)return;const s=setTimeout(()=>n(!0),Kt(30,80));return()=>clearTimeout(s)},[i]),e.jsxs(Fe,{ref:r,shadow:"xs",padding:"lg",radius:"sm",className:"group",withBorder:!0,children:[e.jsx(Fe.Section,{children:e.jsx(w,{className:Mn,style:{height:200},children:o&&e.jsx(Ee,{background:"transparent",view:t,fitView:!0,fitViewPadding:"4px",reduceGraphics:!0})})}),e.jsx($,{justify:"space-between",mt:"md",children:e.jsx(I,{fw:500,children:t.title??t.id})}),e.jsx(Bo,{value:sn.from(t.description),textScale:.75,emptyText:"No description",lineClamp:3,mt:"[2px]",css:{transition:"fast",opacity:{base:.8,_groupHover:1}}}),e.jsx(R,{to:"/view/$viewId/",params:{viewId:t.id},search:!0,className:An})]})}const It=f("/project/$projectId")({staleTime:1/0,beforeLoad:({params:t})=>({projectId:t.projectId}),loader:async({context:t})=>{const o=t.projectId;try{const{$likec4data:n,$likec4model:r}=await mt(o);return{$likec4data:n,$likec4model:r,projectId:o}}catch(n){throw console.error(n),J()}},component:Hn,notFoundComponent:()=>e.jsx("div",{className:he,children:e.jsx(_,{py:"xl",children:e.jsxs(z,{align:"flex-start",children:[e.jsx(Qe,{children:"Project not found"}),e.jsx(v,{component:R,to:"/",search:!0,size:"md",children:"Open overview"})]})})})});function Hn(){const{$likec4data:t,$likec4model:o,projectId:n}=It.useLoaderData();return e.jsx("div",{className:he,children:e.jsx(Je,{FallbackComponent:Ne,children:e.jsx(gt,{projectId:n,children:e.jsx(wt,{likec4data:t,likec4model:o,children:e.jsx(Y,{})})})})})}const Rt=f("/project/$projectId/")({component:()=>{const{projectId:t}=Rt.useParams();return e.jsx(be,{to:"/project/$projectId/view/$viewId/",replace:!0,params:{projectId:t,viewId:"index"}})}}),$t=f("/_single/webcomponent/$")({component:Wn});function Wn(){const t=O(),o=$t.useParams()._splat||"index",{colorScheme:n}=re();let r=t.basepath.endsWith("/")?t.basepath:`${t.basepath}/`;const i=new URL(`${r}likec4-views.js`,window.location.href),s=`
    <!DOCTYPE html>
    <html lang="en-US" style="color-scheme: ${n};">
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no" />
      <style>
        * {
          border-width: 0px;
          border-style: solid;
          box-sizing: border-box;
          overflow-wrap: break-word;
        }
        html, body {
          margin: 0;
          background-color: transparent !important;
          width: 100%;
          height: 100%;
          font-size: 16px;
        }
        body {
          min-height: 100%;
        }
      </style>
    </head>
    <body>      
      <div style="width: 100%; height: 100%; padding: clamp(0.5rem, 5vh, 4rem) clamp(0.5rem, 5vw, 5rem)">
        <${ne.View} view-id="${encodeURIComponent(o)}"></${ne.View}>
      </div>
      <script type="module" src="${i.href}"><\/script>
    </body>
    </html>
  `;return e.jsx(_e,{css:{position:"fixed",inset:"0",width:"100%",height:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%",borderStyle:"none",backgroundColor:"transparent",overflow:"hidden"}},children:e.jsx("iframe",{srcDoc:s,allowtransparency:"true"})})}const kt=t=>"type"in t&&["file","folder","view","deployment-view"].includes(t.type);function Un(t){return t===""?"":t.split("/").slice(0,-1).join("/")}function Ye(t,o){return t.children.length===0&&o.children.length>0?1:t.children.length>0&&o.children.length===0?-1:hn(t.label,o.label)}function Gn(t,o){const n={value:"",label:"Diagrams",type:"folder",children:[]},r=i=>{let s=n;if(i==="")return s;const a=i.split("/"),d=["@fs"];for(;a.length;){const u=a.shift();d.push(u);const p=d.join("/");let c=st(s.children,m=>m.value===p);c||(c={label:u,value:p,type:"folder",children:[]},s.children.push(c)),s=c}return s};for(const i of t){let s;switch(o){case"by-files":s=i.$view.sourcePath??"";break;case"by-folders":s=Un(i.$view.sourcePath??"");break;case"none":s="";break;default:ln(o)}const a=r(s);a.children.push({value:i.id,label:i.title??i.id,type:i.isDeploymentView()?"deployment-view":"view",children:[]}),a!==n&&(a.children.sort(Ye),o==="by-files"&&a.type!=="file"&&(a.type="file"))}return n.children.sort(Ye)}function qn(t="by-files"){const o=ct();return g.useMemo(()=>Gn([...o.views()],t),[o,t])}const Kn=t=>kt(t)&&t.type==="file",Yn=({node:t,expanded:o})=>Kn(t)?e.jsx(Ue,{size:"sm",variant:"transparent",color:"indigo",children:e.jsx(Zo,{size:16})}):e.jsx(Ue,{size:"sm",variant:"transparent",color:"violet",children:o?e.jsx(en,{size:16}):e.jsx(tn,{size:16})}),Jn=()=>{},Qn=g.memo(({groupBy:t})=>{const o=bt(),n=qn(t),r=le(),i=c=>{r({to:"./",viewTransition:!1,params:m=>({...m,viewId:c})})},[s]=W(),a=s?.id??null,d=Io({multiple:!1});d.setHoveredNode=Jn;const u=s?.sourcePath??null;ce(()=>{d.collapseAllNodes()},[t]),g.useEffect(()=>{if(u){const c=u.split("/");let m="@fs";for(const j of c)m+=`/${j}`,d.expand(m)}},[u,t]),g.useEffect(()=>{a&&d.select(a)},[a]);const p=rt();return e.jsx(_e,{children:e.jsx(Ro,{allowRangeSelection:!1,tree:d,data:n,styles:{node:{marginTop:2,marginBottom:2}},levelOffset:"md",renderNode:({node:c,selected:m,expanded:j,elementProps:C,hasChildren:P})=>e.jsx(Xn,{diagram:P?void 0:o.find(l=>l.id===c.value),children:e.jsx(v,{fullWidth:!0,color:p==="light"?"dark":"gray",variant:m?"transparent":"subtle",size:"sm",fz:"sm",fw:P?"600":"500",justify:"flex-start",styles:{section:{opacity:.5}},leftSection:e.jsxs(e.Fragment,{children:[!P&&c.value==="index"&&e.jsx(lt,{size:14,opacity:.7}),!P&&c.value!=="index"&&kt(c)&&e.jsxs(e.Fragment,{children:[c.type==="deployment-view"&&e.jsx(Yo,{size:14}),c.type==="view"&&e.jsx(Jo,{size:14})]}),P&&e.jsx(Yn,{node:c,expanded:j})]}),...C,...!P&&{onClick:l=>{l.stopPropagation(),i(c.value)}},children:c.label})})})})},(t,o)=>t.groupBy===o.groupBy);function Xn({diagram:t,children:o}){const n=t?Math.max(t.bounds.width/400,t.bounds.height/300):1,r=t?Math.round(t.bounds.width/n):0,i=t?Math.round(t.bounds.height/n):0;return e.jsxs(e.Fragment,{children:[t&&e.jsxs(zo,{position:"right-start",openDelay:400,closeDelay:100,keepMounted:!1,shadow:"lg",children:[e.jsx(No,{children:o}),e.jsx(Mo,{style:{width:r,height:i},p:"xs",children:e.jsx(Zn,{diagram:t})})]}),!t&&o]})}const Zn=g.memo(({diagram:t})=>{const o=Math.max(t.bounds.width/400,t.bounds.height/300),n=Math.round(t.bounds.width/o),r=Math.round(t.bounds.height/o);return e.jsx(Ee,{view:t,fitView:!0,fitViewPadding:"4px",enableElementDetails:!1,reduceGraphics:!0,initialWidth:n,initialHeight:r})},(t,o)=>t.diagram.id===o.diagram.id),K=so(!1);Yt(K,()=>{K.set(!1)});const er=()=>ot(K),X={open:()=>K.set(!0),close:()=>K.set(!1)};function Ct(){const t=er(),[o,n]=jo({key:"sidebar-drawer-grouping",defaultValue:"by-files"});return e.jsxs(B.Root,{keepMounted:!0,opened:t,scrollAreaComponent:L.Autosize,onClose:X.close,children:[e.jsx(B.Overlay,{blur:2}),e.jsxs(B.Content,{children:[e.jsxs(B.Header,{children:[e.jsxs($,{gap:"xs",children:[e.jsx(v,{component:R,to:"/",leftSection:e.jsx(Ko,{size:14}),color:"dimmed",variant:"subtle",px:T(5),styles:{section:{marginInlineEnd:4}},size:"xs",children:"Overview"}),e.jsx(wo,{size:"xs",withItemsBorders:!1,value:o,onChange:n,data:[{label:"By files",value:"by-files"},{label:"By folders",value:"by-folders"},{label:"List",value:"none"}]}),e.jsx(v,{leftSection:e.jsx(lt,{size:12,stroke:2}),color:"dimmed",variant:"subtle",px:T(5),styles:{section:{marginInlineEnd:4}},size:"xs",renderRoot:r=>e.jsx(R,{to:"/view/$viewId",params:{viewId:"index"},...r}),children:"Open index"})]}),e.jsx(B.CloseButton,{})]}),e.jsx(B.Body,{children:e.jsx(Qn,{groupBy:o})})]})]})}function tr(){const{setColorScheme:t}=re({keepTransitions:!0}),o=rt("light");return e.jsx(de,{visibleFrom:"sm",size:"md",variant:"subtle",color:"gray",onClick:()=>t(o==="light"?"dark":"light"),"aria-label":"Toggle color scheme",children:o==="light"?e.jsx(Go,{stroke:1.5}):e.jsx(qo,{stroke:1.5})})}const or=b({position:"absolute",backgroundColor:"mantine.colors.body/80",_dark:{backgroundColor:"mantine.colors.dark[6]/60"},'#likec4-root:has([data-likec4-diagram-panning="true"]) &':{boxShadow:"none",borderRadius:"0px",backgroundColor:"mantine.colors.body"}});function nr(){const t=Q(),o=Nn();return t.length<2?null:e.jsxs(Xe,{shadow:"md",width:200,trigger:"click-hover",openDelay:200,children:[e.jsx(Ze,{children:e.jsx(v,{variant:"subtle",size:"sm",color:"gray",px:"sm",rightSection:e.jsx(at,{opacity:.5,size:14}),visibleFrom:"md",children:o.title??o.id})}),e.jsx(et,{children:t.map(({id:n,title:r})=>e.jsx(V,{renderRoot:i=>e.jsx(R,{...i,to:"/project/$projectId/view/$viewId/",params:{projectId:n,viewId:"index"}}),children:r??n},n))})]})}const Pt=()=>e.jsx(q,{color:"yellow",icon:e.jsx(Xo,{}),title:"Localhost URL",styles:{body:{gap:T(4)}},children:e.jsx(I,{c:"yellow",size:"sm",children:"You need to deploy your project to make it available on the internet"})}),$e=({copied:t,copy:o})=>e.jsx(v,{size:"xs",color:t?"teal":"gray",variant:"light",leftSection:t?e.jsx(ht,{style:{width:T(16)}}):e.jsx(pt,{style:{width:T(16)}}),onClick:o,children:t?"Copied":"Copy to clipboard"}),rr=({diagram:t})=>{const o=O(),{colorScheme:n}=re(),[r,i]=g.useState(n),s=20;let a=o.buildLocation({to:"/embed/$viewId",params:{viewId:t.id},search:{padding:s,theme:r!=="auto"?r:void 0}}).href;a=a;const d=new URL(a,window.location.href),u=t.bounds.width+s*2,p=t.bounds.height+s*2,c=d.href,m=`
<div style="aspect-ratio:${u}/${p};width:100%;height:auto;max-width:${u}px;margin:0 auto">
  <iframe src="${c}" width="100%" height="100%" style="border:0;background:transparent;"></iframe>
</div>
`.trim();return e.jsxs(z,{children:[m.includes("http://localhost")&&e.jsx(Pt,{}),e.jsx(w,{children:e.jsx(I,{size:"sm",children:"Embedded view is an iframe with a static diagram"})}),e.jsxs(z,{gap:"xs",children:[e.jsxs($,{justify:"space-between",children:[e.jsx(w,{children:e.jsx(I,{fw:"500",size:"sm",children:"HTML"})}),e.jsxs($,{gap:"xs",children:[e.jsx(de,{component:"a",href:c,target:"_blank",variant:"light",color:"gray",children:e.jsx(ut,{})}),e.jsx(oe,{value:m,timeout:1500,children:$e})]})]}),e.jsx(k,{block:!0,children:m}),e.jsx(w,{style:{alignSelf:"flex-start"},children:e.jsx(yo,{label:"Color scheme",value:r,allowDeselect:!1,onChange:j=>i(j??"auto"),data:[{value:"auto",label:"Auto"},{value:"light",label:"Light"},{value:"dark",label:"Dark"}]})})]})]})};function sr({diagram:t}){const o=O();let n=o.basepath.endsWith("/")?o.basepath:`${o.basepath}/`;const r=`
  <script module src="${new URL(`${n}likec4-views.js`,window.location.href).href}"><\/script>
`.trim(),i=`
<${ne.View}
   view-id="${encodeURIComponent(t.id)}"
   browser="true"
   dynamic-variant="sequence">
</${ne.View}>
`.trim(),s=o.buildLocation({to:"/webcomponent/$",params:{_splat:t.id},search:!0});return e.jsxs(z,{children:[r.includes("http://localhost")&&e.jsx(Pt,{}),e.jsx(w,{children:e.jsx(I,{size:"sm",children:"Add this script to your page:"})}),e.jsxs(z,{gap:"xs",children:[e.jsxs($,{justify:"space-between",children:[e.jsx(w,{children:e.jsx(I,{fw:"500",size:"sm",children:"JavaScript"})}),e.jsxs($,{gap:"xs",children:[e.jsx(de,{component:"a",href:s.href,target:"_blank",variant:"light",color:"gray",children:e.jsx(ut,{})}),e.jsx(oe,{value:r,timeout:1500,children:$e})]})]}),e.jsx(k,{block:!0,children:r}),e.jsx(w,{children:e.jsxs(I,{size:"sm",c:"dimmed",children:["This script defines a custom element (webcomponent) that renders your diagrams.",e.jsx("br",{}),"Script must be inserted once in the ",e.jsx("code",{children:"<head>"})," or at the end of the ",e.jsx("code",{children:"<body>"})," ","tag."]})})]}),e.jsxs(z,{gap:"xs",children:[e.jsxs($,{justify:"space-between",children:[e.jsx(w,{children:e.jsx(I,{fw:"500",size:"sm",children:"HTML"})}),e.jsx(w,{children:e.jsx(oe,{value:i,timeout:1500,children:$e})})]}),e.jsx(k,{block:!0,children:i}),e.jsx(w,{children:e.jsxs(I,{size:"sm",c:"dimmed",children:["Insert this code to your page. Page may have multiple ",e.jsx("code",{children:"<likec4-view>"}),"."]})})]})]})}function ir({onClose:t}){const[o]=W(),[n,r]=g.useState("webcomponent");return o?e.jsxs(uo,{size:"xl",opened:!0,onClose:t,children:[e.jsx(ho,{backgroundOpacity:.5,blur:3}),e.jsx(po,{children:e.jsxs(mo,{children:[e.jsxs(go,{value:n,onChange:i=>r(i??"webcomponent"),children:[e.jsxs(xo,{children:[e.jsx(Be,{value:"webcomponent",children:"Webcomponent"}),e.jsx(Be,{value:"embed",children:"Embedded"})]}),e.jsx(Oe,{value:"embed",pt:"md",children:e.jsx(rr,{diagram:o})}),e.jsx(Oe,{value:"webcomponent",pt:"md",children:e.jsx(sr,{diagram:o})})]}),e.jsx($,{justify:"flex-end",mt:"lg",children:e.jsx(v,{size:"sm",onClick:t,children:"Close"})})]})})]}):null}const St=g.memo(()=>{const t=Q(),o=Jt({select(d){return d.some(({routeId:u})=>u==="/_single/view/$viewId/"||u==="/_single/view/$viewId/editor"||u==="/project/$projectId/view/$viewId")}}),{breakpoints:n}=Qt(),r=Xt(`(min-width: ${n.md})`)??!1,[i,{open:s,close:a}]=Zt(!1);return e.jsxs(eo,{className:or,top:"0.5rem",right:"0.5rem",p:4,radius:"sm",shadow:"lg",children:[e.jsxs($,{gap:r?6:4,wrap:"nowrap",children:[o?e.jsxs(e.Fragment,{children:[e.jsx(nr,{}),t.length<=1&&e.jsx(v,{size:r?"sm":"xs",leftSection:e.jsx(Oo,{size:14}),onClick:s,children:"Share"}),e.jsx(ar,{})]}):e.jsx(v,{component:R,to:"/view/$viewId/",size:r?"sm":"xs",variant:"subtle",color:"gray",children:"Back to diagram"}),e.jsx(to,{orientation:"vertical",visibleFrom:"md"}),e.jsx(tr,{}),e.jsx(oo,{})]}),i&&e.jsx(ir,{onClose:a})]})});function ar(){const t=Se({strict:!1}),o=no().some(r=>r.routeId==="/project/$projectId"),n=yt();return e.jsxs(Xe,{shadow:"md",width:200,trigger:"click-hover",openDelay:200,children:[e.jsx(Ze,{children:e.jsx(v,{variant:"subtle",size:"sm",color:"gray",px:"sm",rightSection:e.jsx(at,{opacity:.5,size:14}),visibleFrom:"md",children:"Export"})}),e.jsxs(et,{children:[e.jsx(ro,{children:"Current view"}),e.jsx(V,{renderRoot:r=>e.jsx(R,{target:"_blank",to:o?"/project/$projectId/export/$viewId/":"/export/$viewId/",search:{download:!0},params:!0,...r}),children:"Export as .png"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/dot",search:!0,params:!0,...r}),children:"Export as .dot"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/d2",search:!0,params:t,...r}),children:"Export as .d2"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/mmd",search:!0,params:{viewId:n},...r}),children:"Export as .mmd"}),e.jsx(V,{disabled:o,renderRoot:r=>e.jsx(R,{to:"/view/$viewId/puml",search:!0,params:{viewId:n},...r}),children:"Export as .puml"}),e.jsx(V,{disabled:!0,children:"Export to Draw.io"}),e.jsx(V,{disabled:!0,children:"Export to Miro"}),e.jsx(V,{disabled:!0,children:"Export to Notion"})]})]})}const Vt=f("/_single/view/$viewId")({component:dr,errorComponent:({error:t,reset:o})=>e.jsx(lr,{error:t,resetErrorBoundary:o})});function lr({error:t,resetErrorBoundary:o}){const n=O(),{viewId:r}=Vt.useParams();return ce(()=>{o()},[r]),tt(t)?e.jsx(_,{my:"md",children:e.jsxs(q,{variant:"light",color:"orange",children:[e.jsxs(I,{c:"orange",fz:"md",children:["The diagram"," ",e.jsx(k,{color:"orange",children:r})," ","does not exist or contains errors"]}),e.jsx(v,{onClick:()=>{o(),n.navigate({to:"/",search:!0})},variant:"light",color:"orange",mt:"lg",size:"xs",children:"Go to overview"})]})}):e.jsx(_,{my:"md",children:e.jsxs(q,{variant:"filled",color:"red",title:"Something went wrong",children:[e.jsx(k,{block:!0,color:"red",children:t.stack??t.message}),e.jsx(v,{onClick:o,color:"red",variant:"white",mt:"lg",size:"xs",children:"Try again"})]})})}function dr(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(St,{}),e.jsx(Ct,{})]})}const S={dagre:{ranksep:60,nodesep:35,edgesep:25},edgeLabel:{width:120,height:10,minlen:1,weight:1},nodeWidth:340,nodeHeight:190,compound:{labelHeight:2,paddingTop:50,paddingBottom:32}};function cr(){const t=new it.graphlib.Graph({directed:!0,compound:!0,multigraph:!0});return t.setGraph({...S.dagre,rankdir:"LR"}),t.setDefaultEdgeLabel(()=>({...S.edgeLabel})),t.setDefaultNodeLabel(()=>({})),t}const ke="-port";function ur(t){const o=ye([...t]),n=new Set(o),r=new Map(o.map(a=>[a.id,a])),i=new Ie(()=>null),s=o.reduce((a,d,u,p)=>(a.set(d,p.slice(u+1).filter(dn(d)).map(c=>(n.delete(c),c)).reduce((c,m)=>(c.some(cn(m))||(c.push(m),i.set(m,d)),c),[])),a),new Ie(()=>[]));return{sorted:o,byId:a=>un(r.get(a),`Element not found by id: ${a}`),root:n,parent:a=>i.get(a),children:a=>s.get(a)}}function ve(t,o,n){const r=new Ie(s=>({id:`${t}-${s}`,portId:`${t}-${s}`})),i=ur(o);for(const s of i.sorted){const a=i.children(s).length>0,d=s.id,u=`${t}-${d}`,p=a?`${u}${ke}`:u;r.set(d,{id:u,portId:p}),n.setNode(u,{element:s,isCompound:a,portId:p,inPorts:[],outPorts:[],width:S.nodeWidth,height:S.nodeHeight}),a&&(n.setNode(p,{element:s,portId:p,isCompound:a,inPorts:[],outPorts:[],width:S.nodeWidth-S.dagre.ranksep,height:S.compound.labelHeight}),n.setParent(p,u));const c=i.parent(s);c&&n.setParent(u,`${t}-${c.id}`)}return{...i,byId:s=>{const a=i.byId(s),d=r.get(a.id);return{element:a,graph:d}},graphNodes:r}}function hr(t){return it.layout(t,{}),o=>{const n=t.node(o),{x:r,y:i,width:s,height:a}=n;return{position:{x:r-Math.round(s/2),y:i-Math.round(a/2)},width:s,height:a}}}function pr(t){const o=cr(),n=ve("in",t.incomers,o),r=ve("subject",t.subjects,o),i=ve("out",t.outgoers,o),s=[];U(Co(U(qe(t.incoming),G(l=>({id:l.source.id,source:n.byId(l.source.id).graph,target:r.byId(l.target.id).graph,relation:l})),ye),U(qe(t.outgoing),G(l=>({id:l.target.id,source:r.byId(l.source.id).graph,target:i.byId(l.target.id).graph,relation:l})),ye)),G(l=>({...l,expr:`${l.source.id}->${l.target.id}`})),ko(He("expr")),$o(l=>{const h=l[0].source,x=l[0].target,y=l[0].expr;o.node(h.id).outPorts.push(x.id),o.node(x.id).inPorts.push(h.id),o.setEdge(h.portId,x.portId,{...S.edgeLabel},y),s.push({name:y,source:h.id,target:x.id,relations:G(l,He("relation"))})}));for(const l of r.graphNodes.values()){const h=l.id,x=o.node(h);if(x.isCompound)continue;const y=Math.max(o.inEdges(h)?.length??0,o.outEdges(h)?.length??0);y>2&&(x.height=x.height+(y-3)*14)}const a=hr(o),d=[...n.graphNodes.values(),...r.graphNodes.values(),...i.graphNodes.values()],u=U(d,We(l=>l.id===l.portId),Po(l=>[l.id,a(l.id)]));function p(l){return u[l]??=U(o.children(l)??[],We(h=>!h.endsWith(ke)),G(h=>p(h)),Fo(h=>{fe(h.length>0,`Node ${l} has no nested nodes`)}),Ao((h,x)=>({minY:Math.min(h.minY,x.position.y),maxY:Math.max(h.maxY,x.position.y+x.height)}),{minY:1/0,maxY:-1/0}),({minY:h,maxY:x})=>{const{position:{x:y},width:F}=a(l);return h=h-S.compound.paddingTop,x=x+S.compound.paddingBottom,{position:{x:y,y:h},width:F,height:x-h}})}function c(l){const h=o.parent(l);return h?c(h)+1:0}function m(l){const h=o.children(l)??[];return h.length===0?0:1+Math.max(...h.map(m))}let j=0,C=0;const P=d.map(({id:l})=>{const{element:h}=o.node(l);let{position:x,width:y,height:F}=p(l);const je=o.parent(l),ee=(o.children(l)??[]).filter(Ot=>!Ot.endsWith(ke));j=Math.min(j,x.x),C=Math.min(C,x.y);const te=h.defaultView?.id??null,{icon:E,shape:At,color:Ft,...Bt}=h.style;return an({id:l,parent:je??null,x:x.x,y:x.y,title:h.title,description:h.description.$source,technology:h.technology,tags:h.tags,links:null,color:Ft,shape:At,icon:E,modelRef:h.id,kind:h.kind,level:c(l),labelBBox:{x:x.x,y:x.y,width:y,height:F},style:Bt,navigateTo:te,inEdges:[],outEdges:[],...ee.length>0&&{depth:m(l)},children:ee,width:y,height:F})});return{bounds:{x:j,y:C,width:o.graph().width??100,height:o.graph().height??100},nodes:P,edges:o.edges().map(l=>{const h=o.edge(l),x=l.name;fe(x,"Edge has no name");const{name:y,source:F,target:je,relations:ee}=st(s,E=>E.name===x),te=h.points.map(E=>[E.x,E.y]);return fe(So(te,1),`Edge ${y} has less than 2 points`),{id:y,source:F,target:je,label:null,relations:ee.map(E=>E.id),parent:null,points:te,color:"gray",line:"dashed"}})}}function mr(t){const o=useLikeC4Model();return g.useMemo(()=>({id:`relationships-${t}`,title:`Relationships of ${t}`,description:null,autoLayout:{direction:"LR"},tags:null,links:null,hash:"empty",customColorDefinitions:{},...pr(Ge(t,o,null))}),[o,t,Ge])}const Tt=f("/_single/relationships/$fqn")({component:gr});function gr(){const{fqn:t}=Tt.useParams();return mr(t),e.jsx(e.Fragment,{children:e.jsx(w,{className:he})})}async function xr({pngFilename:t,viewport:o}){try{const i=await To(o,{backgroundColor:"transparent",cacheBust:!0,imagePlaceholder:"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="});if(!i)throw new Error("Failed to create PNG blob");var n=URL.createObjectURL(i),r=document.createElement("a");r.setAttribute("download",`${t}.png`),r.href=n,document.body.appendChild(r),r.click(),await new Promise(s=>setTimeout(s,1e3)),document.body.removeChild(r),URL.revokeObjectURL(n),window.close()}catch(i){console.error(i),window.alert("Failed to export to PNG, check the console for more details.")}}function Lt(){const{padding:t=20,download:o=!1,dynamic:n}=Le({strict:!1}),[r]=W(),i=g.useRef(null),s=g.useRef(null),a=g.useRef(!1);vt();const d=fo(()=>{const j=i.current;if(!o||!j||!r||a.current)return;const C=s.current;C&&(C.style.display="none"),a.current=!0,xr({pngFilename:r.id,viewport:j})},[r],500);if(!r)return e.jsx("div",{children:"Loading..."});const u=dt(r,n),p=16,c=u.width+t*2+p,m=u.height+t*2+p;return e.jsxs(_e,{ref:i,"data-testid":"export-page",css:{position:"fixed",top:"0",left:"0",padding:"0",margin:"0",background:"transparent",overflow:"hidden",zIndex:2},style:{marginRight:"auto",marginBottom:"auto",minWidth:c,width:c,minHeight:m,height:m},children:[o&&e.jsx(vo,{ref:s,visible:!0}),e.jsx(De,{view:r,fitView:!1,fitViewPadding:{top:"0px",bottom:"0px",left:"0px",right:"0px"},background:"transparent",reduceGraphics:!1,dynamicViewVariant:n,readonly:!0,className:"likec4-static-view",pannable:!1,zoomable:!1,controls:!1,enableNotations:!1,enableElementDetails:!1,enableRelationshipDetails:!1,enableRelationshipBrowser:!1,enableDynamicViewWalkthrough:!1,enableFocusMode:!1,enableSearch:!1,nodesSelectable:!1,nodesDraggable:!1,enableElementTags:!1,onInitialized:()=>{if(!i.current){console.error("viewportRef.current is null");return}[...i.current.querySelectorAll(".react-flow__viewport")].forEach(j=>{j.style.transform="translate("+t+"px, "+t+"px)"}),o&&d()}})]})}const jr=t=>{if(typeof t=="boolean")return t;if(typeof t=="string")return t==="true"},wr=f("/_single/export/$viewId")({component:Lt,validateSearch:t=>({download:jr(t.download)})});function Et(){const{padding:t=20,dynamic:o}=Le({strict:!1}),[n]=W();if(vt(!!n),!n)return e.jsx("div",{children:"Loading..."});const r=dt(n,o);return e.jsx("div",{style:{position:"absolute",top:0,left:"50%",boxSizing:"border-box",padding:t,transform:"translateX(-50%)",aspectRatio:`${r.width+t*2} / ${r.height+t*2}`,width:"100vw",maxWidth:r.width+t*2,height:"auto",maxHeight:"100vh"},children:e.jsx(Ee,{view:n,fitView:!0,background:"transparent",fitViewPadding:0,dynamicViewVariant:o,initialWidth:r.width,initialHeight:r.height})})}const fr=f("/_single/embed/$viewId")({component:Et});function _t(){const t=le(),[o,n]=W(),r=ct(),{dynamic:i}=Le({from:"__root__"}),s=Te(p=>{t({to:"./",viewTransition:!1,params:c=>({...c,viewId:p}),search:!0})}),a=o?o.title??o.id:"View not found",d=r.project.title??ze;if(Pe(`${a} - ${d}`),!o)return e.jsx(Me,{});const u=(o.notation?.nodes??[]).length>0;return e.jsx(De,{view:o,readonly:!0,zoomable:!0,pannable:!0,controls:!0,fitViewPadding:{top:"70px",bottom:"32px",left:"32px",right:"32px"},showNavigationButtons:!0,enableSearch:!0,enableFocusMode:!0,enableDynamicViewWalkthrough:!0,dynamicViewVariant:i,enableElementDetails:!0,enableRelationshipDetails:!0,enableRelationshipBrowser:!0,enableElementTags:!0,enableCompareWithLatest:!0,enableNotations:u,nodesDraggable:!1,nodesSelectable:!0,onNavigateTo:s,onLayoutTypeChange:n,onBurgerMenuClick:()=>{t({to:"/"})},children:e.jsx(vr,{})})}function vr(){const t=O(),o=Qo(n=>n.dynamicViewVariant);return ce(()=>{(t.latestLocation.search.dynamic??"diagram")!==o&&t.buildAndCommitLocation({search:n=>({...n,dynamic:o}),viewTransition:!1})},[o]),null}const br=f("/_single/view/$viewId/")({component:_t}),yr=f("/project/$projectId/view/$viewId")({component:Ir});function Ir(){return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),e.jsx(St,{}),e.jsx(Ct,{})]})}const Rr=t=>{if(typeof t=="boolean")return t;if(typeof t=="string")return t==="true"},$r=f("/project/$projectId/export/$viewId")({component:Lt,validateSearch:t=>({download:Rr(t.download)})}),kr=f("/project/$projectId/embed/$viewId")({component:Et});function Cr({text:t}){return e.jsx(oe,{value:t,timeout:2e3,children:({copied:o,copy:n})=>e.jsx(Lo,{label:o?"Copied":"Copy",withArrow:!0,position:"right",children:e.jsx(de,{color:o?"teal":"gray",variant:o?"light":"subtle",onClick:n,children:o?e.jsx(ht,{style:{width:T(16)}}):e.jsx(pt,{style:{width:T(16)}})})})})}function pe({text:t}){return e.jsx(w,{pos:"absolute",top:"0",right:"0",p:"4",children:e.jsx(Cr,{text:t})})}const me=b({height:"100%","& .mantine-ScrollArea-viewport":{minHeight:"100%"},"& .mantine-ScrollArea-viewport > div":{minHeight:"100%",height:"100%"}}),ge=b({minHeight:"100%"}),xe=b({paddingTop:"[var(--header-height)]"}),Dt=f("/_single/view/$viewId/puml")({component:Sr,staleTime:1/0,loader:async({params:t,context:o})=>{const n=o.projectId,{viewId:r}=t,{loadPumlSources:i}=await N(async()=>{const{loadPumlSources:s}=await import("./puml-COFUjlnb.js");return{loadPumlSources:s}},__vite__mapDeps([4,2,5,6,1,7]));try{const{pumlSource:s}=await i(n);return{source:s(r)}}catch(s){throw console.error(s),J()}}}),Pr=async t=>await(await fetch(on,{method:"POST",cache:"force-cache",body:JSON.stringify({diagram_source:t,output_format:"svg"}),headers:{"Content-Type":"application/json"}})).text();function Sr(){const{source:t}=Dt.useLoaderData(),[o,{execute:n}]=Ve(Pr,null);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:xe,direction:"horizontal",autoSaveId:"viewAsPuml",children:[e.jsx(D,{children:e.jsxs(L,{className:me,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:ge,children:t}),e.jsx(pe,{text:t})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(D,{children:e.jsxs(L,{h:"100%",children:[o.status!=="success"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{mt:"xs",variant:"light",disabled:o.status==="loading",onClick:()=>void n(t),children:o.status==="loading"?"Loading...":"Render with Kroki"}),o.status==="error"&&e.jsx(w,{children:o.error?.message})]}),o.status==="success"&&e.jsx(w,{className:ue,children:o.result?e.jsx("div",{dangerouslySetInnerHTML:{__html:o.result}}):e.jsx(w,{children:"Empty result"})})]})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}const Ce=f("/_single/view/$viewId/mmd")({component:Tr,staleTime:1/0,loader:async({params:t,context:o})=>{const n=o.projectId,{viewId:r}=t,{loadMmdSources:i}=await N(async()=>{const{loadMmdSources:s}=await import("./mmd-DsZpm1cH.js");return{loadMmdSources:s}},__vite__mapDeps([8,2,5,6,1,7]));try{const{mmdSource:s}=await i(n);return{source:s(r)}}catch(s){throw console.error(s),J()}}}),Vr=async(t,o)=>{const{default:n}=await N(async()=>{const{default:i}=await import("https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs");return{default:i}},[]);n.initialize({theme:"dark"});const{svg:r}=await n.render(t,o);return r};function Tr(){const{viewId:t}=Ce.useParams(),{source:o}=Ce.useLoaderData(),[n,{execute:r}]=Ve(Vr,null);return g.useEffect(()=>{r(t,o)},[o]),e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:xe,direction:"horizontal",autoSaveId:"viewAsMmd",children:[e.jsx(D,{children:e.jsxs(L,{className:me,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:ge,children:o}),e.jsx(pe,{text:o})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(D,{children:e.jsx(L,{h:"100%",children:n.result&&e.jsx("div",{className:ue,dangerouslySetInnerHTML:{__html:n.result}})})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}function zt(){const t=le(),[o,n]=W(),r=Te(s=>{t({to:"./",viewTransition:!1,params:a=>({...a,viewId:s}),search:!0})});if(!o)return e.jsx(Me,{});const i=(o.notation?.nodes??[]).length>0;return e.jsx(De,{view:o,readonly:!1,zoomable:!0,pannable:!0,controls:!0,nodesDraggable:!0,fitViewPadding:{top:"70px",bottom:"32px",left:"50px",right:"32px"},showNavigationButtons:!0,enableNotations:i,enableSearch:!0,enableDynamicViewWalkthrough:!0,enableFocusMode:!0,enableElementDetails:!0,enableRelationshipDetails:!0,enableRelationshipBrowser:!0,enableElementTags:!0,enableCompareWithLatest:!0,onNavigateTo:r,onLayoutTypeChange:n,onChange:s=>console.log(s),onBurgerMenuClick:()=>{t({to:"/"})}})}const Lr=f("/_single/view/$viewId/editor")({component:zt}),Nt=f("/_single/view/$viewId/dot")({component:Er,staleTime:1/0,loader:async({params:t,context:o})=>{const n=o.projectId,{viewId:r}=t,{loadDotSources:i}=await N(async()=>{const{loadDotSources:s}=await import("./dot-Cufivdcu.js");return{loadDotSources:s}},__vite__mapDeps([9,2,5,6,1,7]));try{const{dotSource:s,svgSource:a}=await i(n),d=s(r),u=a(r);return{dot:d,dotSvg:u}}catch(s){throw console.error(s),J()}}});function Er(){const{dot:t,dotSvg:o}=Nt.useLoaderData();return e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:xe,direction:"horizontal",autoSaveId:"viewAsDot",children:[e.jsx(D,{children:e.jsxs(L,{className:me,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:ge,children:t}),e.jsx(pe,{text:t})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(D,{children:e.jsx(L,{h:"100%",children:e.jsx("div",{className:ue,dangerouslySetInnerHTML:{__html:o}})})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}const Mt=f("/_single/view/$viewId/d2")({component:Dr,staleTime:1/0,loader:async({context:t,params:o})=>{const n=t.projectId,{viewId:r}=o,{loadD2Sources:i}=await N(async()=>{const{loadD2Sources:s}=await import("./d2-0IW1PLws.js");return{loadD2Sources:s}},__vite__mapDeps([10,2,5,6,1,7]));try{const{d2Source:s}=await i(n);return{source:s(r)}}catch(s){throw console.error(s),J()}}}),_r=async t=>await(await fetch(nn,{method:"POST",cache:"force-cache",body:JSON.stringify({diagram_source:t,output_format:"svg"}),headers:{"Content-Type":"application/json"}})).text();function Dr(){const{source:t}=Mt.useLoaderData(),[o,{execute:n}]=Ve(_r,null);return e.jsxs(e.Fragment,{children:[e.jsxs(se,{className:xe,direction:"horizontal",autoSaveId:"viewAsD2",children:[e.jsx(D,{children:e.jsxs(L,{className:me,p:5,styles:{viewport:{borderRadius:6}},children:[e.jsx(k,{block:!0,className:ge,children:t}),e.jsx(pe,{text:t})]})}),e.jsx(ie,{style:{width:10}}),e.jsx(D,{children:e.jsxs(L,{h:"100%",children:[o.status!=="success"&&e.jsxs(e.Fragment,{children:[e.jsx(v,{mt:"xs",variant:"light",disabled:o.status==="loading",onClick:()=>void n(t),children:o.status==="loading"?"Loading...":"Render with Kroki"}),o.status==="error"&&e.jsx(w,{children:o.error?.message})]}),o.status==="success"&&e.jsx(w,{className:ue,children:o.result?e.jsx("div",{dangerouslySetInnerHTML:{__html:o.result}}):e.jsx(w,{children:"Empty result"})})]})})]}),e.jsx(w,{pos:"fixed",top:14,left:10,children:e.jsx(ae,{size:"sm",onClick:X.open,"aria-label":"Toggle navigation"})})]})}const zr=f("/project/$projectId/view/$viewId/")({component:_t}),Nr=f("/project/$projectId/view/$viewId/editor")({component:zt}),Mr=Pn.update({id:"/projects",path:"/projects",getParentRoute:()=>H}),M=ft.update({id:"/_single",getParentRoute:()=>H}),Ar=zn.update({id:"/",path:"/",getParentRoute:()=>H}),Fr=Fn.update({id:"/single-index",path:"/single-index",getParentRoute:()=>M}),Z=It.update({id:"/project/$projectId",path:"/project/$projectId",getParentRoute:()=>H}),Br=Rt.update({id:"/",path:"/",getParentRoute:()=>Z}),Or=$t.update({id:"/webcomponent/$",path:"/webcomponent/$",getParentRoute:()=>M}),A=Vt.update({id:"/view/$viewId",path:"/view/$viewId",getParentRoute:()=>M}),Hr=Tt.update({id:"/relationships/$fqn",path:"/relationships/$fqn",getParentRoute:()=>M}),Wr=wr.update({id:"/export/$viewId",path:"/export/$viewId",getParentRoute:()=>M}),Ur=fr.update({id:"/embed/$viewId",path:"/embed/$viewId",getParentRoute:()=>M}),Gr=br.update({id:"/",path:"/",getParentRoute:()=>A}),Ae=yr.update({id:"/view/$viewId",path:"/view/$viewId",getParentRoute:()=>Z}),qr=$r.update({id:"/export/$viewId",path:"/export/$viewId",getParentRoute:()=>Z}),Kr=kr.update({id:"/embed/$viewId",path:"/embed/$viewId",getParentRoute:()=>Z}),Yr=Dt.update({id:"/puml",path:"/puml",getParentRoute:()=>A}),Jr=Ce.update({id:"/mmd",path:"/mmd",getParentRoute:()=>A}),Qr=Lr.update({id:"/editor",path:"/editor",getParentRoute:()=>A}),Xr=Nt.update({id:"/dot",path:"/dot",getParentRoute:()=>A}),Zr=Mt.update({id:"/d2",path:"/d2",getParentRoute:()=>A}),es=zr.update({id:"/",path:"/",getParentRoute:()=>Ae}),ts=Nr.update({id:"/editor",path:"/editor",getParentRoute:()=>Ae}),os={SingleViewViewIdD2Route:Zr,SingleViewViewIdDotRoute:Xr,SingleViewViewIdEditorRoute:Qr,SingleViewViewIdMmdRoute:Jr,SingleViewViewIdPumlRoute:Yr,SingleViewViewIdIndexRoute:Gr},ns=A._addFileChildren(os),rs={SingleSingleIndexRoute:Fr,SingleEmbedViewIdRoute:Ur,SingleExportViewIdRoute:Wr,SingleRelationshipsFqnRoute:Hr,SingleViewViewIdRoute:ns,SingleWebcomponentSplatRoute:Or},ss=M._addFileChildren(rs),is={ProjectProjectIdViewViewIdEditorRoute:ts,ProjectProjectIdViewViewIdIndexRoute:es},as=Ae._addFileChildren(is),ls={ProjectProjectIdIndexRoute:Br,ProjectProjectIdEmbedViewIdRoute:Kr,ProjectProjectIdExportViewIdRoute:qr,ProjectProjectIdViewViewIdRoute:as},ds=Z._addFileChildren(ls),cs={IndexRoute:Ar,SingleRouteRoute:ss,ProjectsRoute:Mr,ProjectProjectIdRouteRoute:ds},us=H._addFileChildren(cs)._addFileTypes();function hs(){return Eo({routeTree:us,context:{projectId:Re.length>0?Re[0].id:"default"},basepath:rn,trailingSlash:"always",defaultViewTransition:!0,history:_o(),defaultStaleTime:1/0,scrollRestoration:!1,defaultStructuralSharing:!0,defaultNotFoundComponent:()=>e.jsx(Me,{}),defaultErrorComponent:({error:t,reset:o})=>e.jsx(Ne,{error:t,resetErrorBoundary:o})})}function ps(){const t=g.useMemo(()=>hs(),[]);return e.jsx(bo,{router:t})}const ms=io({autoContrast:!0,primaryColor:"indigo",cursorType:"pointer",fontFamily:"var(--likec4-app-font)",headings:{fontWeight:"500",sizes:{h1:{fontWeight:"600"},h2:{}}},components:{Portal:ao.extend({defaultProps:{reuseTargetNode:!0}})}});Ht.createRoot(document.getElementById("likec4-root")).render(e.jsx(g.StrictMode,{children:e.jsx(lo,{theme:ms,defaultColorScheme:"auto",children:e.jsx(ps,{})})}));export{N as _};
